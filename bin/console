#!/usr/bin/env php
<?php

use Star\EventStorming\Infrastructure\Cli\Application;
use Star\EventStorming\Infrastructure\Cli\FormatCommand;
use Star\EventStorming\Infrastructure\Filesystem\PhpFile;
use Star\EventStorming\Infrastructure\Persistence\InMemory\EventCollection;
use Symfony\Component\Console\Input\ArgvInput;

require __DIR__.'/../vendor/autoload.php';

$application = new Application(new EventCollection());
$application->add(
    new FormatCommand(new PhpFile(__DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR . 'events.json'))
);
$input = new ArgvInput();
$application->run($input);

return $application;
